{% extends "base.html" %}
{% set spec_route = "submissions" %}

{% block content %}

<div class='govuk-grid-row'>
  <div class='govuk-grid-column-full'>
    <a class="govuk-back-link" href="{{ links.back }}">Back to submission specifications</a>
    <h1 class="govuk-heading-xl">{{ title }}</h1>
  </div>
</div>

<div class='govuk-grid-row'>
  <div class='govuk-grid-column-one-quarter'>
    <nav class="govuk-!-margin-bottom-6">
      <ul class="govuk-list">
        <li><a class="govuk-link" href="#details">Details</a></li>
        <li><a class="govuk-link" href="#fields">Fields</a></li>
        <li><a class="govuk-link" href="#modules">Modules</a></li>
        <li><a class="govuk-link" href="#feedback">Feedback</a></li>
      </ul>
    </nav>
  </div>
  <div class='govuk-grid-column-three-quarters'>
  <span id="details"></span>
  {% if description %}<p class="govuk-body-l">{{ description }}</p>{% endif %}

  <dl class="govuk-summary-list">
    <div class="govuk-summary-list__row">
      <dt class="govuk-summary-list__key">Application</dt>
      <dd class="govuk-summary-list__value"><code>{{ application }}</code></dd>
    </div>
    {% if synonyms %}
    <div class="govuk-summary-list__row">
      <dt class="govuk-summary-list__key">Synonyms</dt>
      <dd class="govuk-summary-list__value">{{ synonyms | join(", ") }}</dd>
    </div>
    {% endif %}
    {% if entry_date %}
    <div class="govuk-summary-list__row">
      <dt class="govuk-summary-list__key">Entry date</dt>
      <dd class="govuk-summary-list__value">{{ entry_date }}</dd>
    </div>
    {% endif %}
    {% if legislation %}
    <div class="govuk-summary-list__row">
      <dt class="govuk-summary-list__key">Legislation</dt>
      <dd class="govuk-summary-list__value">
        <ul class="govuk-list govuk-list--bullet">
          {% for l in legislation %}
            <li><a class="govuk-link" href="{{ l }}">{{ l }}</a></li>
          {% endfor %}
        </ul>
      </dd>
    </div>
    {% endif %}
    {% if notes %}
    <div class="govuk-summary-list__row">
      <dt class="govuk-summary-list__key">Notes</dt>
      <dd class="govuk-summary-list__value">{{ notes }}</dd>
    </div>
    {% endif %}
  </dl>

  {% if fields %}
    <h2 class="govuk-heading-l" id="fields">Fields</h2>
    <dl class="govuk-summary-list">
      {% for field in fields %}
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">{{ field.name }}</dt>
          <dd class="govuk-summary-list__value">
            <p class="govuk-body">{{ field.description }}</p>
            <p class="govuk-hint govuk-!-margin-bottom-1">Reference: <code>{{ field.ref }}</code></p>
            {% if field.required is not none %}
              <p class="govuk-hint govuk-!-margin-bottom-0">Required: {{ field.required }}</p>
            {% endif %}
          </dd>
        </div>
      {% endfor %}
    </dl>
  {% endif %}

  {% if modules %}
    <h2 class="govuk-heading-l" id="modules">Modules</h2>
    <ul class="govuk-list govuk-list--bullet">
      {% for module in modules %}
        <li><code>{{ module.ref }}</code>{% if module.required is not none %} (required: {{ module.required }}){% endif %}</li>
      {% endfor %}
    </ul>
  {% endif %}
  <h2 class="govuk-heading-l" id="feedback">Help to improve this application schema</h2>
  <p class="govuk-body">To help keep this application schema useful and up to date, you can:</p>
  <ul class="govuk-list govuk-list--bullet">
    <li><a class="govuk-link" href="https://github.com/digital-land/planning-application-data-specification/issues/new?title=[{{ application }}]%20Feedback%20on%20submission%20application%20schema">Raise feedback on GitHub</a></li>
    <li><a class="govuk-link" href="https://github.com/digital-land/planning-application-data-specification/edit/main/specification/application/{{ application }}.schema.md">Propose an edit on GitHub</a></li>
    <li><a class="govuk-link" href="https://design-system.service.gov.uk/community/propose-a-content-change-using-github/">See how to propose changes using GitHub</a></li>
  </ul>
  </div>
</div>
{% endblock %}
