{% extends "base.html" %}
{% set spec_route = "decisions" %}

{% block app_breadcrumbs %}
  {{- govukBreadcrumbs(breadcrumbs | default({
    'items': [
      {
        'text': "Home",
        'href': base_url + "/"
      },
      {
        'text': "Decisions",
        'href': base_url + "/decision-stage"
      },
      {
        'text': "Needs",
      }
    ]
  })) -}}
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <h1 class="govuk-heading-xl">Decision stage needs</h1>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-three-quarters">
    <p class="govuk-body">This index links to the current set of decision-stage needs so contributors can see the rationale behind the specification and spot gaps or overlaps.</p>
    <p class="govuk-body">Each need captures who the need serves, what they want to achieve, and why it matters for planning outcomes and downstream services.</p>
    <a class="govuk-button govuk-!-margin-bottom-4" href="https://github.com/digital-land/planning-application-data-specification/issues/new?template=new-requirement.yml">+ propose new need</a>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <p class="govuk-body">Showing {{ needs|length }} needs</p>
  {% for need in needs %}
    <div class="app-need-card--summary govuk-!-margin-bottom-6">
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-three-quarters">
          <h2 class="govuk-heading-m govuk-!-margin-bottom-1">
            <a class="govuk-link govuk-link--no-visited-state" href="{{ need.href }}">{{ need.id }}</a>
          </h2>
          <p class="govuk-body govuk-!-margin-bottom-0">{{ need.statement }}</p>
        </div>
        <div class="govuk-grid-column-one-quarter govuk-!-text-align-right">
          <strong class="govuk-tag {{ need.tag_class }}">{{ need.tag_label }}</strong>
        </div>
      </div>
    </div>
  {% endfor %}
  <div class="app-engagement-panel">
    <h3 class="govuk-heading-m">
      Want to suggest a new need or improvement?
    </h3>
    <p class="govuk-body">To help make sure we have good and useful needs, you can</p>
    <ul class="govuk-list govuk-list--bullet">
      <li>add evidence or challenge a user need in our list</li>
      <li><a href="https://github.com/digital-land/planning-application-data-specification/issues/new?template=new-requirement.yml" class="govuk-link">propose a new need on github</a></li>
    </ul>
  </div>
  </div>
</div>
{% endblock %}
