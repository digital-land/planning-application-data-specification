{% extends "base.html" %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <a class="govuk-back-link" href="{{ links.back }}">Back to needs</a>
    <span class="govuk-caption-xl">{{ need_ref }}</span>
    <h1 class="govuk-heading-xl">{{ title }}</h1>
    <strong class="govuk-tag {{ tag_class }} govuk-!-margin-bottom-3">{{ tag_label }}</strong>
  </div>
</div>
  
<div class="govuk-grid-row">
  <div class="govuk-grid-column-three-quarters">
  {% if statement %}<p class="govuk-body-l">{{ statement }}</p>{% endif %}

  {% if meta %}
    <dl class="govuk-summary-list">
      {% for item in meta %}
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">{{ item.label }}</dt>
          <dd class="govuk-summary-list__value">{{ item.value }}</dd>
        </div>
      {% endfor %}
    </dl>
  {% endif %}

  <h2 class="govuk-heading-l">Justification</h2>
  {% if justifications %}
    {% for j in justifications %}
      <details class="govuk-details govuk-!-margin-bottom-3">
        <summary class="govuk-details__summary">
          <span class="govuk-details__summary-text">Justification {{ j.id }}</span>
        </summary>
        <div class="govuk-details__text">
          {% if j.notes %}<p class="govuk-body">{{ j.notes }}</p>{% endif %}
          <p class="govuk-hint">Satisfaction: {{ j.satisfaction }}; Confidence: {{ j.confidence }}</p>
        </div>
      </details>
    {% endfor %}
  {% else %}
    <p class="govuk-hint">No justification recorded yet.</p>
  {% endif %}
  </div>
</div>

{% endblock %}
