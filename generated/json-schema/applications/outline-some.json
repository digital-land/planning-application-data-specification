{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "$id": "outline-some.json",
  "title": "Outline Planning Permission with Some Matters Reserved",
  "description": "Outline planning permission with some matters reserved",
  "type": "object",
  "properties": {
    "access-rights-of-way": {
      "$ref": "#/definitions/access-rights-of-way"
    },
    "bio-geo-arch-con": {
      "$ref": "#/definitions/bio-geo-arch-con"
    },
    "foul-sewage": {
      "$ref": "#/definitions/foul-sewage"
    },
    "haz-substances": {
      "$ref": "#/definitions/haz-substances"
    },
    "materials": {
      "$ref": "#/definitions/materials"
    },
    "trade-effluent": {
      "$ref": "#/definitions/trade-effluent"
    },
    "trees-hedges": {
      "$ref": "#/definitions/trees-hedges"
    },
    "vehicle-parking": {
      "$ref": "#/definitions/vehicle-parking"
    },
    "waste-storage-collection": {
      "$ref": "#/definitions/waste-storage-collection"
    }
  },
  "required": [],
  "definitions": {
    "building-element": {
      "type": "object",
      "properties": {
        "building-element-type": {
          "type": "string",
          "enum": [
            "walls",
            "roof",
            "windows",
            "doors",
            "boundary-treatments",
            "vehicle-access-hard-standings",
            "lighting",
            "external-walls",
            "roof-covering",
            "chimney",
            "external-doors",
            "ceilings",
            "internal-walls",
            "floors",
            "internal-doors",
            "rainwater-goods",
            "other"
          ]
        },
        "existing-materials": {
          "type": "string"
        },
        "proposed-materials": {
          "type": "string"
        },
        "materials-not-applicable": {
          "type": "boolean"
        },
        "materials-not-known": {
          "type": "boolean"
        }
      },
      "required": [
        "building-element-type"
      ]
    },
    "parking-space": {
      "type": "object",
      "properties": {
        "parking-space-type": {
          "type": "string",
          "enum": [
            "car-space",
            "light-goods-vehicle-space",
            "motorcycle-space",
            "disability-space",
            "cycle-space",
            "blue-badge-space",
            "bus",
            "car-club",
            "resi-off-street",
            "other"
          ]
        },
        "vehicle-type-other": {
          "type": "string"
        },
        "total-existing": {
          "type": "number"
        },
        "total-proposed": {
          "type": "number"
        },
        "unknown-proposed": {
          "type": "string"
        },
        "difference-in-spaces": {
          "type": "number"
        }
      },
      "required": [
        "parking-space-type",
        "total-existing",
        "total-proposed",
        "difference-in-spaces"
      ],
      "allOf": [
        {
          "if": {
            "properties": {
              "parking-space-type": {
                "const": "other"
              }
            }
          },
          "then": {
            "required": [
              "vehicle-type-other"
            ]
          }
        }
      ]
    },
    "hazardous-substance": {
      "type": "object",
      "properties": {
        "hazardous-substance-type": {
          "type": "string",
          "enum": [
            "acrylonitrile",
            "ammonia",
            "bromine",
            "chlorine",
            "ethylene-oxide",
            "flour",
            "hydrogen-cyanide",
            "liquid-oxygen",
            "liquid-petroleum-gas",
            "phosgene",
            "refined-white-sugar",
            "sulphur-dioxide"
          ]
        },
        "hazardous-substance-other": {
          "type": "string"
        },
        "amount": {
          "type": "number"
        }
      },
      "required": [
        "hazardous-substance-type",
        "amount"
      ],
      "allOf": [
        {
          "if": {
            "properties": {
              "hazardous-substance-type": {
                "const": "other"
              }
            }
          },
          "then": {
            "required": [
              "hazardous-substance-other"
            ]
          }
        }
      ]
    },
    "supporting-document": {
      "type": "object",
      "properties": {
        "reference": {
          "type": "string"
        },
        "name": {
          "type": "string"
        }
      },
      "required": [
        "reference",
        "name"
      ]
    },
    "waste-storage-collection": {
      "type": "object",
      "properties": {
        "waste-storage-area-details": {
          "type": "string"
        },
        "separate-recycling-arrangements-details": {
          "type": "string"
        }
      },
      "required": [],
      "allOf": [
        {
          "if": {
            "properties": {
              "needs-waste-storage-area": {
                "const": true
              }
            }
          },
          "then": {
            "required": [
              "waste-storage-area-details"
            ]
          }
        },
        {
          "if": {
            "properties": {
              "separate-recycling-arrangements": {
                "const": true
              }
            }
          },
          "then": {
            "required": [
              "separate-recycling-arrangements-details"
            ]
          }
        }
      ]
    },
    "vehicle-parking": {
      "type": "object",
      "properties": {
        "parking-spaces": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/parking-space"
          },
          "minItems": 1
        }
      },
      "required": [
        "parking-spaces"
      ]
    },
    "trees-hedges": {
      "type": "object",
      "properties": {
        "trees-on-site": {
          "type": "boolean"
        },
        "trees-on-adj-land": {
          "type": "boolean"
        }
      },
      "required": [
        "trees-on-site",
        "trees-on-adj-land"
      ]
    },
    "access-rights-of-way": {
      "type": "object",
      "properties": {
        "new-altered-vehicle": {
          "type": "string",
          "enum": [
            "true",
            "false",
            "unknown"
          ]
        },
        "new-altered-pedestrian": {
          "type": "string",
          "enum": [
            "true",
            "false",
            "unknown"
          ]
        },
        "supporting-documents": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/supporting-document"
          },
          "minItems": 1
        }
      },
      "required": [
        "new-altered-vehicle",
        "new-altered-pedestrian"
      ],
      "allOf": [
        {
          "if": {
            "anyOf": [
              {
                "properties": {
                  "new-altered-vehicle": {
                    "const": "true"
                  }
                }
              },
              {
                "properties": {
                  "new-altered-pedestrian": {
                    "const": "true"
                  }
                }
              },
              {
                "properties": {
                  "change-right-of-way": {
                    "const": "true"
                  }
                }
              },
              {
                "properties": {
                  "new-right-of-way": {
                    "const": "true"
                  }
                }
              },
              {
                "properties": {
                  "new-public-road": {
                    "const": "true"
                  }
                }
              },
              {
                "properties": {
                  "temp-right-of-way": {
                    "const": "true"
                  }
                }
              },
              {
                "properties": {
                  "future-new-right-of-way": {
                    "const": "true"
                  }
                }
              }
            ]
          },
          "then": {
            "required": [
              "supporting-documents"
            ]
          }
        }
      ]
    },
    "materials": {
      "type": "object",
      "properties": {
        "building-elements": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/building-element"
          },
          "minItems": 1
        },
        "additional-material-information": {
          "type": "string"
        },
        "supporting-documents": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/supporting-document"
          },
          "minItems": 1
        }
      },
      "required": [
        "building-elements",
        "additional-material-information"
      ],
      "allOf": [
        {
          "if": {
            "properties": {
              "additional-material-information": {
                "const": true
              }
            }
          },
          "then": {
            "required": [
              "supporting-documents"
            ]
          }
        }
      ]
    },
    "bio-geo-arch-con": {
      "type": "object",
      "properties": {
        "protected-species-impact": {
          "type": "string",
          "enum": [
            "on-development-site",
            "adjacent-to-site"
          ]
        },
        "biodiversity-features-impact": {
          "type": "string",
          "enum": [
            "on-development-site",
            "adjacent-to-site"
          ]
        },
        "geological-features-impact": {
          "type": "string",
          "enum": [
            "on-development-site",
            "adjacent-to-site"
          ]
        }
      },
      "required": [
        "protected-species-impact",
        "biodiversity-features-impact",
        "geological-features-impact"
      ]
    },
    "trade-effluent": {
      "type": "object",
      "properties": {
        "is-disposal-required": {
          "type": "boolean"
        },
        "description": {
          "type": "string"
        }
      },
      "required": [
        "is-disposal-required"
      ],
      "allOf": [
        {
          "if": {
            "properties": {
              "disposal-required": {
                "const": true
              }
            }
          },
          "then": {
            "required": [
              "description"
            ]
          }
        }
      ]
    },
    "foul-sewage": {
      "type": "object",
      "properties": {
        "has-new-disposal-arrangements": {
          "type": "boolean"
        },
        "foul-sewage-disposal-types": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "mains-sewer",
              "cess-pit",
              "septic-tank",
              "package-treatment",
              "other"
            ]
          },
          "minItems": 1
        },
        "produce-foul-sewage": {
          "type": "boolean"
        },
        "connect-to-drainage-system": {
          "type": "boolean"
        },
        "drainage-system-details": {
          "type": "string"
        }
      },
      "required": [
        "has-new-disposal-arrangements",
        "produce-foul-sewage",
        "connect-to-drainage-system"
      ],
      "allOf": [
        {
          "if": {
            "properties": {
              "has-new-disposal-arrangements": {
                "const": true
              }
            }
          },
          "then": {
            "required": [
              "foul-sewage-disposal-types"
            ]
          }
        }
      ]
    },
    "haz-substances": {
      "type": "object",
      "properties": {
        "involves-hazardous-substances": {
          "type": "string",
          "enum": [
            "yes",
            "no",
            "not-applicable"
          ]
        },
        "substance-types": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/hazardous-substance"
          },
          "minItems": 1
        },
        "hazardous-sub-consent-req": {
          "type": "boolean"
        },
        "hazardous-sub-consent-details": {
          "type": "string"
        }
      },
      "required": [
        "involves-hazardous-substances",
        "hazardous-sub-consent-req"
      ],
      "allOf": [
        {
          "if": {
            "properties": {
              "involves-hazardous-substances": {
                "const": "yes"
              }
            }
          },
          "then": {
            "required": [
              "substance-types"
            ]
          }
        },
        {
          "if": {
            "properties": {
              "hazardous-sub-consent-req": {
                "const": true
              }
            }
          },
          "then": {
            "required": [
              "hazardous-sub-consent-details"
            ]
          }
        }
      ]
    }
  }
}